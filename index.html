<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script>
      AFRAME.registerComponent('draggable', {
        init: function() {
          this.isDragging = false;
          let lastPosition = null;

          this.el.addEventListener('mousedown', (evt) => {
            this.isDragging = true;
            lastPosition = evt.detail.intersection.point;
          });

          this.el.addEventListener('mousemove', (evt) => {
            if (!this.isDragging || !lastPosition) return;
            let currentPosition = evt.detail.intersection.point;
            let deltaX = currentPosition.x - lastPosition.x;
            let deltaY = currentPosition.y - lastPosition.y;
            let deltaZ = currentPosition.z - lastPosition.z;

            let position = this.el.getAttribute('position');
            position.x += deltaX;
            position.y += deltaY;
            position.z += deltaZ;
            this.el.setAttribute('position', position);

            lastPosition = currentPosition;
          });

          window.addEventListener('mouseup', () => {
            this.isDragging = false;
          });
        }
      });
    </script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <a-marker preset="hiro">
            <a-box position="0 0.5 0" rotation="0 0 0" material="color: red; opacity: 0.5" draggable></a-box>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>

